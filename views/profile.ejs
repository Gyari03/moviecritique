<%- include('header') %>

<div class = "main">
    <div>
    <img src="/images/pfp.png" class="pfp">
    </div>

    <form action="/profile/edit" method="POST">
    <div class="input-group">
        <label>Email Address</label>
        <input type="email" name="email" value="<%= profile.Email %>" required>
        <button type="submit" id="changeemailbutton">Change</button>
    </div>
    </form>

    <form action="/profile/edit" method="POST">
    <div class="input-group">
        <label>Username</label>
        <input name="Username" value="<%= profile.Username %>">
        <button type="submit" id="changeusernamebutton">Change</button>
    </div>
    </form>

<h2>Change password:</h2>

    <form id="passwordForm" action="/profile/edit" method="POST">
        <div class="input-group">
            <label>New password</label>
            <input name="Password" id="changepasswordinput" type="password" required>
        </div>

        <div class="input-group">
            <label>Confirm password</label>
            <input id="confirmpasswordinput" type="password" required>
            <button type="submit" id="changepasswordbutton">Change</button>
        </div>

        <p id="error-message" style="color: red; display: none;">Passwords do not match!</p>
    </form>

    <script>
        document.getElementById("passwordForm").addEventListener("submit",(event)=>{
            const password = document.getElementById("changepasswordinput");
            const confirm_password = document.getElementById("confirmpasswordinput");
            const error_message = document.getElementById("error-message");

            if(password.value !== confirm_password.value){
                event.preventDefault();
                error_message.style.display = "block";
            } else{
                error_message.style.display = "none";
            }
        })
    </script>


    <form action="/logout" method="POST">
        <div class="input-group">
            <button id="Logoutbutton" type="submit">Log out</button>
        </div>
    </form>
</div>


<%- include('footer') %>